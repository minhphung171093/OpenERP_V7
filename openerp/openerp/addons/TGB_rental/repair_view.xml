<openerp>
    <data>

        <record id="TGB_Repair_order_form" model="ir.ui.view">
            <field name="name">tgb repair form</field>
            <field name="model">repair.order</field>
            <field name="priority">36</field>
            <field name="arch" type="xml">
                <form string="Product price" version="7.0">
                     <header>
                          <button  name="set_done" states="draft" type="object" string="Repair on spot"/>
                         <button  name="confirm_order" states="draft" type="object" string="Confirm Order"/>
                         <button  name="cancel_order" states="done,confirm,manual,wait" type="object" string="Cancel Order"/>
                         <button name="return_product" states="confirm" type="object" string="Return Product"/>
                         <button  name="to_quarantine" states="confirm" type="object" string="To Quarantine"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,confirm,repair,done,quarantine,cancel"/>
                       </header>
                    <sheet>
                        <group>
                        <field name="name"/>
                         <field name="order_create_date" string="Created date"/>
                        <field name="shop_id" on_change="onchange_shop_id(shop_id, context)" widget="selection"/>
                        <field name="pricelist_id" invisible="1"/>
                        <field name="partner_id" string="Customer" domain="[('customer','=',True)]"/>
                        <field name="product_id"/>
                        <field name="product_serial" domain="[('product_id','=',product_id)]"/>
                        </group>
                    <notebook>
                        <page string="Product">
                             <separator string="Product List"/>
                              <field name="repair_lines"/>
                            <group>
                             <field name="amount_total" string="Amount total"/>
                            </group>
                        </page>
                        <page string="Other Information">
                             <separator string="Invoices"/>
                           <field name="invoice_ids"/>
                            <separator string="Delivery Order"/>
                           <field name="picking_ids"/>
                        </page>
                        <page string="Remarks"><field name="note"/></page>
                    </notebook>
                    </sheet>
                </form>
            </field>
        </record>

         <record id="TGB_Repair_order_tree" model="ir.ui.view">
            <field name="name">tgb.product.view</field>
            <field name="model">repair.order</field>
            <field name="priority">36</field>
            <field name="arch" type="xml">
                <tree string="Product price">
                         <field name="order_create_date"/>
                    <field name="name"/>
                       <field name="partner_id"/>
                        <field name="product_id"/>
                        <field name="product_serial"/>
                         <field name="amount_total"/>
                        <field name="state"/>
                </tree>
            </field>
        </record>

            <record id="TGB_Repair_order_line_form" model="ir.ui.view">
            <field name="name">Repair line form</field>
            <field name="model">repair.order.line</field>
            <field name="priority">36</field>
            <field name="arch" type="xml">
                <form string="Product price" version="7.0"><group>
                         <field name="product_id" string="Product" on_change="onchange_product_id(product_id,price,product_uom_qty)"/>
                        <field name="product_uom_qty" invisible="1" on_change="onchange_product_id(product_id,price,product_uom_qty)"/>
                    <field name="product_uom"/>
                    <field name="price" string="Price" on_change="onchange_product_id(product_id,price,product_uom_qty)"/>
                 <field name="subprice"/></group>
                </form>
            </field>
        </record>

        <record id="TGB_Repair_order_line_tree" model="ir.ui.view">
            <field name="name">Repair line tree</field>
            <field name="model">repair.order.line</field>
            <field name="priority">36</field>
            <field name="arch" type="xml">
                <tree string="Product price" editable="top">
                         <field name="product_id" on_change="onchange_product_id(product_id,price,product_uom_qty)"/>
                       <field name="product_uom_qty" on_change="onchange_product_id(product_id,price,product_uom_qty)"/>
                    <field name="product_uom" />
                    <field name="price" on_change="onchange_product_id(product_id,price,product_uom_qty)"/>
                    <field name="subprice"/>
                </tree>
            </field>
        </record>
  <record id="tgb_Repair_order_action" model="ir.actions.act_window">
            <field name="name">Repair Order</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">repair.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="TGB_Repair_order_tree"/>
        </record>
        <menuitem name="Repair Order"
               id="tgb_Repair_order_menu"
            parent="base.menu_sales"
                action="tgb_Repair_order_action"/>
    </data>
</openerp>
