<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		
		<record id="analytic_journal_product" model="account.analytic.journal">
            <field name="code">TP</field>
            <field name="name">Task Product Journal</field>
            <field name="type">general</field>
        </record>
				
		<record model="ir.ui.view" id="make_marketing1">
			<field name="name">make_marketing_form1</field>
			<field name="model">check.warehouse</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Check List">
					<field name="name"/>
					<field name="project_id"/>
					<field name="assigned_id"/>
					<field name="planned_hours"/>
					<field name="consume_location_id"/>
					<field name="deli_location_id"/>
					<separator string="Products For Task" colspan="4"/>
					<field colspan="4" name="project_finish_product_ids" nolabel="1">
					<tree editable="bottom">
						<field name="product_id"/>
						<!-- <field name="quantity" on_change="onchange_quantity(product_id,quantity)" string="Estimated Quantity"/> -->
						<field name="quantity" string="Estimated Quantity"/>
					</tree>
					</field>
					<newline/>
					<separator colspan="4"/>
					<group colspan="4">
						<button icon="gtk-cancel" special="cancel" string="Cancel" />
						<button icon="gtk-ok" name="allow_to_send" string="Generate" type="object" />
					</group>
				</form>
			</field>
		</record>
		
		<record id="act_check_list" model="ir.actions.act_window">
			<field name="name">List to do </field>
			<field name="res_model">check.warehouse</field>
			<field name="src_model">project.project</field>
			<field name="type">ir.actions.act_window</field>
			<field name="view_type">form</field>
			<field name="view_mode">form</field>
			<field name="auto_refresh" eval="1" />
			<field name="target">new</field>
			<field name="context">{'ids':active_id}</field>
		</record>
		
		
		<!-- Inherit Sale order -->
		
		<record model="ir.ui.view" id="view_order_form_inherit_new_fields">
			 <field name="name">sale.order.form.inherit_new_fields</field>
	    	 <field name="model">sale.order</field>
	    	 <field name="inherit_id" ref="sale.view_order_form"/>
	    	 <field name="arch" type="xml">
	    	 	<field name="client_order_ref" position="after">
					<field name="create_project" attrs="{'invisible':[('sale_project_id','!=',False)]}"/>
					<field name="start_date" attrs="{'invisible':[('create_project','!=',True)],'required':[('create_project','=',True)],'readonly':[('state','!=','draft')]}"/>
					<field name="end_date" attrs="{'invisible':[('create_project','!=',True)],'required':[('create_project','=',True)],'readonly':[('state','!=','draft')]}"/>
					<field name="sale_project_id" attrs="{'readonly':['|',('create_project','=',True)]}" on_change="onchange_project_id(sale_project_id)" domain="[('state','=','open')]"/>					
			    </field>
			    <xpath expr="////form[@string='Sales Order']/header/button[@string='Create Invoice']" position="replace">
	    	 		<button name="%(sale.action_view_sale_advance_payment_inv)d" string="Create Invoice"
                            type="action" states="manual" class="oe_highlight" attrs="{'invisible':['|',('create_project','=',True)]}" groups="base.group_user" />
                </xpath> 
	    	 </field>
		</record>
		
		<record model="ir.ui.view" id="view_order_form_inherit_actual_amt">
			 <field name="name">sale.order.form.inherit_actual_amt</field>
	    	 <field name="model">sale.order</field>
	    	 <field name="inherit_id" ref="sale.view_order_form"/>
	    	 <field name="arch" type="xml">
	    	 	<field name="amount_total" position="after">
					<field name="actual_amt"/>
					<field name="variation_amt" />
				</field>
	    	</field>
		</record>
		
		<record model="ir.ui.view" id="purchase_order_form_inherit123">
			 <field name="name">purchase.order.form.inherit123</field>
	    	 <field name="model">purchase.order</field>
	    	 <field name="inherit_id" ref="purchase.purchase_order_form"/>
	    	 <field name="arch" type="xml">
	    	 	<field name="pricelist_id" position="after">
					<field name="purchase_project_id"/>
				</field>
				<field name="amount_untaxed" position="before">
                                       <field name="disc"/>
                               </field>
				<xpath expr="////form[@string='Purchase Order']/sheet/notebook/page[@string='Incoming Shipments &amp; Invoices']" position="after">
					<page string="Related PO History">
						<separator string="PO History" colspan="4"/>
						<group>
							<field name="po_history_ids" nolabel="1">
								<group col="4">
								<field name="history_id" invisible="1"/>
								<field name="date"/>
								<field name="description"/>
								</group>
								<tree>
									<field name="date"/>
									<field name="description"/>
								</tree>
							</field>
						</group>
					</page>
				</xpath>
	    	</field>
		</record>
		
		<!-- Sequences for Project Name created from Sale Order Start --> 
		 
        <record id="seq_type_project_project" model="ir.sequence.type">
            <field name="name">project</field>
            <field name="code">project.project</field>
        </record>
        <record id="seq_project_project" model="ir.sequence">
            <field name="name">Project</field>
            <field name="code">project.project</field>
            <field name="prefix">Project_</field>
            <field name="padding">3</field>
        </record>
		
		<record model="ir.ui.view" id="inherit_project_form_products_tab">
			<field name="name">Project Form Partner</field>
			<field name="model">project.project</field>
			<field name="inherit_id" ref="project.edit_project" />
			<field name="type">form</field>
			<field name="arch" type="xml">
				<page string="Other Info" position="after">
					<page string="Related Sale Orders">
						<field name="sale_ids" colspan="4" nolabel="1"/>
					</page>
					<page string="Related Purchase Orders">
						<field name="purchase_ids" colspan="4" nolabel="1" />
					</page>
					<page string="Project Tasks">
						<field name="project_task_ids" colspan="4" nolabel="1"/>
					</page>
					<page string="Inventory Usage">
						<field name="product_used_ids" colspan="4" nolabel="1">
							<tree>
								<field name="inventory_id" invisible="1"/>
								<field name="product_id"/>
								<field name="estimated_qty"/>
								<field name="usage_qty"/>
								<field name="consumed_qty"/>
							</tree>
						</field>
					</page>
					<page string="Project Deliverables">
						<field colspan="4" name="project_finish_product_ids" nolabel="1"/>
						<button name="%(act_check_list)d" string="Create Task" type="action" colspan="1" target="new" states="open,pending" icon="gtk-execute"/>
					</page>
				</page>
			</field>
		</record>
				
		<!-- finish product from -->
		<record id="finish_product_tree" model="ir.ui.view">
			<field name="name">project.finish.products.tree</field>
			<field name="model">project.finish.products</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Finish Products" editable="bottom"  >  
					<field name="sale_order_id" />
					<field name="product_id" />
					<field name="quantity"/>
					<!-- <field name="remain_qty" invisible="1"/> -->
					<field name="done_quantity" invisible="1"/>
				</tree>
			</field>
		</record>
		
		<record model="ir.ui.view" id="crossovered_budget_view_form_inherit">
			<field name="name">crossovered.budget.view.form.inherit</field>
			<field name="model">crossovered.budget</field>
			<field name="inherit_id" ref="account_budget.crossovered_budget_view_form" />
			<field name="arch" type="xml">
				<field name="validating_user_id" position="after">
					<field name="project_id"/>
				</field>
			</field>
		</record>
		
		<!-- inherit task form -->
		<record model="ir.ui.view" id="inherit_task_form1">
			<field name="name">project.task.form.inhrt1</field>
			<field name="model">project.task</field>
			<field name="inherit_id" ref="project.view_task_form2" />
			<field name="arch" type="xml">
				<xpath expr="////form[@string='Project']/sheet[@string='Task']/h1/field[@name='name']" position="replace">
                     <field name="name" placeholder="Task summary..." attrs="{'readonly':[('state','=','done')]}"/>
                </xpath>
                <xpath expr="////form[@string='Project']/sheet[@string='Task']/group/group/field[@name='project_id']" position="replace">
                     <field name="project_id" on_change="onchange_project(project_id)" context="{'default_use_tasks':1}" attrs="{'readonly':[('state','=','done')]}"/>
                </xpath>
				<page string="Extra Info" position="after">
					<page string="Task Deliverables" >
						<field colspan="4" name="task_finish_product_ids" nolabel="1" attrs="{'readonly':[('state','=','done')]}"/>
					</page>
				</page>
			</field>
		</record>
		
		<record model="ir.ui.view" id="inherit_task_form3">
			<field name="name">project.task.form.inhrt3</field>
			<field name="model">project.task</field>
			<field name="inherit_id" ref="project.view_task_form2" />
			<field name="arch" type="xml">
				<field name="planned_hours" position="after">
					<field name="analytic_account_id" string="Budget Used" attrs="{'readonly':[('state','=','done')]}"/>
				</field>	
				<field name="sequence" position="after">
					<field name="product_journal_id"/>
					<field name="sale_order_id"/>
				</field>
			</field>
		</record>
		
		<record model="ir.ui.view" id="inherit_task_form2">
			<field name="name">project.task.form.inhrt2</field>
			<field name="model">project.task</field>
			<field name="inherit_id" ref="project.view_task_form2" />
			<field name="arch" type="xml">
				<field name="description" position="before">
					<group col = "4" colspan = "4" >
					<field name="consume_location_id" attrs="{'readonly':[('state','=','done')]}"/>
					<field name="deli_location_id" attrs="{'readonly':[('state','=','done')]}"/>
					</group>
					<field colspan="4" name="task_consume_product_ids" nolabel="1" attrs="{'readonly':[('state','=','done')]}"/>
				</field>
				
			</field>
		</record>
		
		<record model="ir.ui.view" id="inherit_task_form_123">
			<field name="name">project.task.form.inhrt123</field>
			<field name="model">project.task</field>
			<field name="inherit_id" ref="project.view_task_form2" />
			<field name="arch" type="xml">
				<button name="project_task_reevaluate" string="Reactivate" type="object"
                    states="cancelled,done" context="{'button_reactivate':True}" groups="base.group_user" position="replace"/>
				<field name="work_ids" position="replace">
				</field>
				<field name="description" position="after">
					<field name="work_ids" groups="project.group_tasks_work_on_tasks" attrs="{'readonly':[('state','=','done')]}">
                                <tree string="Task Work" editable="top">
                                    <field name="name"/>
                                    <field name="hours" widget="float_time" sum="Spent Hours"/>
                                    <field name="date"/>
                                    <field name="user_id"/>
                                </tree>
                    </field>
                 </field>
			</field>
		</record>
		
		<record model="ir.ui.view" id="inherit_task_form213">
			<field name="name">project.task.form.inhrt444</field>
			<field name="model">project.task</field>
			<field name="inherit_id" ref="project.view_task_form2" />
			<field name="arch" type="xml">
				<button name="action_close" string="Done" type="object" states="draft,open,pending" groups="base.group_user" position="replace">
					<button name="action_close" states="pending,open" string="Done" type="object" icon="terp-dialog-close" confirm="Are you Sure..?"/>
				</button>
			</field>
		</record>
		
		<!-- task consumed product form -->
		<record id="consume_product_tree" model="ir.ui.view">
			<field name="name">task.consume.products.tree</field>
			<field name="model">task.consume.products</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Consumed Products" editable="bottom"  >  
					<field name="product_id" />
					<field name="plan_qty" on_change="on_change_plan_qty(plan_qty)"/>
					<field name="used_qty" on_change="on_change_used_qty(used_qty)"/>
					<field name="quantity" invisible="1"/>
					<field name="invoice_line_amt" invisible="1"/>
 					<field name="state"/>
				</tree>
			</field>
		</record>
		
		<!-- task finish product from -->
		<record id="task_finish_product_tree" model="ir.ui.view">
			<field name="name">task.finish.products.tree</field>
			<field name="model">task.finish.products</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Finish Products" editable="bottom"  >  
					<field name="product_id" />
					<field name="quantity" />
<!-- 					<field name="done_quantity" /> -->
				</tree>
			</field>
		</record>
		
		<record id="view_picking_form_inherit11" model="ir.ui.view">
            <field name="name">stock.picking.form</field>
            <field name="model">stock.picking.in</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
            	<xpath expr="//form[@string='Internal Picking List']/sheet/h1/field[@name='name']" position="after">
                    <div class="oe_right oe_button_box" name="buttons">
                    </div>
                </xpath>
               	<xpath expr="//div[@name='buttons']" position="inside">
                    <button name="view_picking_shipment" string="View Invoice" type="object" states=""/>
                </xpath>
            </field>
		</record>
		
		<record id="project.open_view_project_all" model="ir.actions.act_window">
            <field name="name">Projects</field>
            <field name="res_model">project.project</field>
            <field name="view_type">form</field>
            <field name="domain">[]</field>
            <field name="view_mode">tree,form,gantt</field>
            <field name="view_id" ref="project.view_project_kanban"/>
            <field name="search_view_id" ref="project.view_project_project_filter"/>
            <field name="context">{'search_default_Current': 1}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                  Click to start a new project.
                </p><p>
                  Projects are used to organize your activities; plan
                  tasks, track issues, invoice timesheets. You can define
                  internal projects (R&amp;D, Improve Sales Process),
                  private projects (My Todos) or customer ones.
                </p><p>
                  You will be able collaborate with internal users on
                  projects or invite customers to share your activities.
                </p>
            </field>
        </record>
		
		<record id="project.action_view_task" model="ir.actions.act_window">
            <field name="name">Tasks</field>
            <field name="res_model">project.task</field>
            <field name="view_mode">tree,form,calendar,gantt,graph</field>
            <field name="search_view_id" ref="project.view_task_search_form"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a new task.
              </p><p>
                OpenERP's project management allows you to manage the pipeline
                of tasks in order to get things done efficiently. You can
                track progress, discuss on tasks, attach documents, etc.
              </p>
            </field>
        </record>
        
		<delete model="ir.actions.act_window.view" id="project.open_view_task_list_kanban"/>
		
		<record id="invoice_form_inherit12" model="ir.ui.view">
            <field name="name">account.invoice.form.inherit12</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_form" />
            <field name="arch" type="xml">
            	<xpath expr="////form[@string='Invoice']/sheet[@string='Invoice']/group/group/field[@name='fiscal_position']" position="after">
            		<field name="desc_of_charges" attrs="{'readonly':[('state','!=','draft')]}"/>
            	</xpath>
            	<xpath expr="////form[@string='Invoice']/sheet[@string='Invoice']/group/group/field[@name='account_id']" position="after">
            		<field name="pro_status" />
            	</xpath>
            	<xpath expr="////form[@string='Invoice']/sheet[@string='Invoice']/notebook/page[@string='Invoice Lines']/group[@class='oe_subtotal_footer oe_right']" position="before">
            		<group>
            		<field name="inv_line_tax_id" widget="many2many_tags" 
                                        domain="[('parent_id','=',False),('type_tax_use','=','sale')]"/>
                    </group>
            	</xpath>
            	<xpath expr="////form[@string='Invoice']/sheet[@string='Invoice']/notebook/page[@string='Invoice Lines']/field[@name='invoice_line']/tree[@string='Invoice Lines']/field[@name='discount']" position="replace">
            		<field name="discount" invisible="1" groups="sale.group_discount_per_so_line"/>
            	</xpath>
            	<xpath expr="////form[@string='Invoice']/sheet[@string='Invoice']/notebook/page[@string='Invoice Lines']/field[@name='invoice_line']/tree[@string='Invoice Lines']/field[@name='invoice_line_tax_id']" position="replace">
            		<field name="invoice_line_tax_id" widget="many2many_tags" context="{'type':parent.type}" invisible="1"
                                        domain="[('parent_id','=',False),('company_id', '=', parent.company_id)]"/>
            	</xpath>  
            	<xpath expr="////form[@string='Invoice']/sheet[@string='Invoice']/notebook/page[@string='Invoice Lines']/group[@class='oe_subtotal_footer oe_right']/field[@name='amount_untaxed']" position="before">
            		<field name="disc" groups="sale.group_discount_per_so_line"/>
            	</xpath>
            </field>
		</record>
		
		<!-- Account analytic line overwrite for colour purpose -->
		<record id="account.view_account_analytic_line_tree" model="ir.ui.view">
            <field name="name">account.analytic.line.tree</field>
            <field name="model">account.analytic.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="blue:(invoice_id==False) and ref==False; green:(invoice_id==False) and ref!=False" editable="top" string="Analytic Entries">
                    <field name="date"/>
                    <field name="ref" invisible="context.get('to_invoice', False)"/>
                    <field name="name"/>
                    <field name="journal_id" invisible="context.get('to_invoice', False)"/>
                    <field name="amount" sum="Total" invisible="context.get('to_invoice', False)"/>
                    <field name="product_id" on_change="on_change_unit_amount(product_id, unit_amount, company_id, product_uom_id, journal_id)" invisible="not context.get('to_invoice', False)"/>
                    <field name="unit_amount" on_change="on_change_unit_amount(product_id, unit_amount, company_id, product_uom_id)" sum="Total Quantity" />
                    <field name="product_uom_id" on_change="on_change_unit_amount(product_id, unit_amount, company_id, product_uom_id)" />
                    <field domain="[('type','=','normal')]" name="account_id"/>
                    <field name="general_account_id" invisible="context.get('to_invoice', False)"/>
                    <field name="user_id" invisible="1" />
                    <field name="invoice_id" invisible="1"/>
                    <field name="task_id"/>
                    <field name="company_id" invisible="1"/>
                </tree>
            </field>
        </record>
		
		
		 <record id="view_account_analytic_account_tree12" model="ir.ui.view">
            <field name="name">account.analytic.account.tree</field>
            <field name="model">account.analytic.account</field>
            <field name="type">tree</field>
            <field name="view_id" ref="account.view_account_analytic_account_tree"/>
            <field name="field_parent">child_complete_ids</field>
            <field name="arch" type="xml">
                <tree colors="red:(date&lt;current_date);black:(date&gt;=current_date);black:(date==False)" string="Analytic account" toolbar="1">
                    <field name="name"/>
                    <field name="code" string="Account Code"/>
                    <field name="quantity" invisible="1"/>
                    <field name="quantity_max" invisible="1"/>
                    <field name="debit" string="Revenue"/>
                    <field name="credit" string="Expenses"/>
                    <field name="balance" string="Profit"/>
                    <field name="currency_id" groups="base.group_extended"/>
                    <field name="date" invisible="1"/>
                    <field name="user_id" invisible="1"/>
                    <field name="partner_id" invisible="1"/>
                    <field name="parent_id" invisible="1"/>
                </tree>
            </field>
         </record>
        
        <record id="account.action_account_analytic_account_tree2" model="ir.actions.act_window">
            <field name="name">Chart of Analytic Accounts</field>
            <field name="res_model">account.analytic.account</field>
            <field name="view_type">tree</field>
            <field name="view_id" ref="view_account_analytic_account_tree12"/>
            <field name="domain">[('parent_id','=',False)]</field>
            <field name="help">The normal chart of accounts has a structure defined by the legal requirement of the country. The analytic chart of accounts structure should reflect your own business needs in term of costs/revenues reporting. They are usually structured by contracts, projects, products or departements. Most of the OpenERP operations (invoices, timesheets, expenses, etc) generate analytic entries on the related account.</field>
        </record>
		
		<report id="account_budget.report_crossovered_budget"
                string="Budgets"
                model="crossovered.budget"
                name="crossovered.budget.modified.report"
                rml="project_costing_sinar/report/modified_crossovered_budget_report.rml"
                auto="False"
                menu="False" />
        
        <report auto="False" id="purchase.report_purchase_quotation" model="purchase.order" 
                name="purchase.quotation" rml="project_costing_sinar/report/request_quotation.rml"
                string="Request for Quotation"/>
                        
        <report auto="False" id="purchase.report_purchase_order" model="purchase.order"
                name="purchase.order" rml="project_costing_sinar/report/order.rml"
                usage="default" string="Purchase Order"/>
                
        <report auto="False" id="report_project_project" model="project.project"
                name="project.project" rml="project_costing_sinar/report/project.rml"
                usage="default" string="Print Project"/>
                
        <report auto="False" id="account.report_account_financial_report" model="account.financial.report"
                name="account.financial.report" rml="project_costing_sinar/report/account_financial_report.rml"
                usage="default" string="Profit And Loss"/>
                
        <report auto="False" id="report_account_move" model="account.move"
                name="account.move" rml="project_costing_sinar/report/journal_entry.rml"
                usage="default" string="Print Journal"/>
                
        <report auto="False" id="report_account_move_line" model="report.account.move.line"
                name="account.move.line" rml="project_costing_sinar/report/journal_item.rml"
                usage="default" string="Print Journal Item"/>
                
        <report
            auto="False"
            id="account.account_invoices"
            model="account.invoice"
            name="account.invoice"
            rml="project_costing_sinar/report/account_print_invoice.rml"
            string="Invoices"
            usage="default"
            attachment="(object.state in ('open','paid')) and ('INV'+(object.number or '').replace('/','')+'.pdf')"
            attachment_use="True"
            />
                
	</data>
</openerp>
